{"ast":null,"code":"var _jsxFileName = \"C:\\\\Programming\\\\Codeit Sprint\\\\part-2\\\\react-practice\\\\moviepedia\\\\src\\\\components\\\\App.js\",\n  _s = $RefreshSig$();\nimport ReviewList from \"./ReviewList\";\nimport { useEffect, useState } from \"react\";\nimport { getReviews } from \"./api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LIMIT = 6;\nfunction App() {\n  _s();\n  // 최상위 컴포넌트\n  const [items, setItems] = useState([]);\n  const [order, setOrder] = useState(\"createdAt\");\n  const [offset, setOffset] = useState(0);\n  const [hasNext, setHasNext] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const handleNewstClick = () => setOrder(\"createdAt\");\n  const handleBestClick = () => setOrder(\"rating\");\n  const sortedItems = items.sort((a, b) => b[order] - a[order]);\n  const handleDelete = id => {\n    const nextItems = items.filter(item => item.id !== id);\n    setItems(nextItems);\n  };\n  const handleLoad = async options => {\n    let result;\n    try {\n      // 로딩 시작\n      setIsLoading(true);\n      result = await getReviews(options);\n    } catch (error) {\n      console.log(error);\n      return;\n    } finally {\n      // 리퀘스트가 실패하거나 성공하는 경우\n      // 오류가 나도 항상 로딩 값은 false\n      setIsLoading(false);\n    }\n    const {\n      reviews,\n      paging\n    } = result;\n    if (options.offset === 0) {\n      setItems(reviews);\n    } else {\n      // previtems : 현재 state 값\n      setItems(previtems => [...previtems, ...reviews]);\n    }\n    // 데이터를 받아온 후 작업 offset limit값만큼 증가\n    setOffset(options.offset + reviews.length);\n    setHasNext(paging.hasNext); // 리스폰스에 있는 paging 객체\n  };\n  const handleLoadMore = () => {\n    // 다음 페이지를 불러오는 함수\n    handleLoad({\n      order,\n      offset,\n      limit: LIMIT\n    });\n  };\n  useEffect(() => {\n    handleLoad({\n      order,\n      offset: 0,\n      limit: LIMIT\n    });\n  }, [order]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleNewstClick,\n        children: \"\\uCD5C\\uC2E0\\uC21C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleBestClick,\n        children: \"\\uBCA0\\uC2A4\\uD2B8\\uC21C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReviewList, {\n      items: sortedItems,\n      onDelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), hasNext && /*#__PURE__*/_jsxDEV(\"button\", {\n      disabled: isLoading,\n      onClick: handleLoadMore,\n      children: \"\\uB354\\uBCF4\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"icDj/QFM5Ktq87X2U9hgn66tyLI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["ReviewList","useEffect","useState","getReviews","jsxDEV","_jsxDEV","LIMIT","App","_s","items","setItems","order","setOrder","offset","setOffset","hasNext","setHasNext","isLoading","setIsLoading","handleNewstClick","handleBestClick","sortedItems","sort","a","b","handleDelete","id","nextItems","filter","item","handleLoad","options","result","error","console","log","reviews","paging","previtems","length","handleLoadMore","limit","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onDelete","disabled","_c","$RefreshReg$"],"sources":["C:/Programming/Codeit Sprint/part-2/react-practice/moviepedia/src/components/App.js"],"sourcesContent":["import ReviewList from \"./ReviewList\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { getReviews } from \"./api\";\r\n\r\nconst LIMIT = 6;\r\n\r\nfunction App() {\r\n  // 최상위 컴포넌트\r\n  const [items, setItems] = useState([]);\r\n  const [order, setOrder] = useState(\"createdAt\");\r\n  const [offset, setOffset] = useState(0);\r\n  const [hasNext, setHasNext] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleNewstClick = () => setOrder(\"createdAt\");\r\n  const handleBestClick = () => setOrder(\"rating\");\r\n\r\n  const sortedItems = items.sort((a, b) => b[order] - a[order]);\r\n\r\n  const handleDelete = (id) => {\r\n    const nextItems = items.filter((item) => item.id !== id);\r\n    setItems(nextItems);\r\n  };\r\n\r\n  const handleLoad = async (options) => {\r\n    let result;\r\n    try {\r\n      // 로딩 시작\r\n      setIsLoading(true);\r\n      result = await getReviews(options);\r\n    } catch (error) {\r\n      console.log(error);\r\n      return;\r\n    } finally {\r\n      // 리퀘스트가 실패하거나 성공하는 경우\r\n      // 오류가 나도 항상 로딩 값은 false\r\n      setIsLoading(false);\r\n    }\r\n    const { reviews, paging } = result;\r\n    if (options.offset === 0) {\r\n      setItems(reviews);\r\n    } else {\r\n      // previtems : 현재 state 값\r\n      setItems((previtems) => [...previtems, ...reviews]);\r\n    }\r\n    // 데이터를 받아온 후 작업 offset limit값만큼 증가\r\n    setOffset(options.offset + reviews.length);\r\n    setHasNext(paging.hasNext); // 리스폰스에 있는 paging 객체\r\n  };\r\n\r\n  const handleLoadMore = () => {\r\n    // 다음 페이지를 불러오는 함수\r\n    handleLoad({ order, offset, limit: LIMIT });\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleLoad({ order, offset: 0, limit: LIMIT });\r\n  }, [order]);\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <button onClick={handleNewstClick}>최신순</button>\r\n        <button onClick={handleBestClick}>베스트순</button>\r\n      </div>\r\n      <ReviewList items={sortedItems} onDelete={handleDelete} />\r\n      {/* hasNext 값이 true인 경우 실행, false인 경우 표현식 계산하지 않고 hasNext의 값을 사용함 (리액트에서 false 값은 렌더링하지 않음)  \r\n      로딩되고 있는 경우에는 버튼을 비활성화 처리 \r\n      비활성화 처리하지 않는 경우 로딩 중에 버튼을 클릭할 수 있어 불필요한 리퀘스트 발생 가능함 */}\r\n      {hasNext && (\r\n        <button disabled={isLoading} onClick={handleLoadMore}>\r\n          더보기\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}